<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проверка ссылок</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .working { color: green; }
        .not-working { color: red; }
        #results, #workingLinks {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            width: 100%;
            max-width: 600px;
        }
        .container {
            display: flex;
            gap: 20px;
            justify-content: space-between;
            width: 100%;
            max-width: 1200px;
        }
        h2 {
            text-align: center;
        }
        button {
            margin-top: 20px;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Проверка первых трех ссылок</h1>
    <button id="start">Начать проверку</button>
    <button id="stop" disabled>Остановить</button>
    <div class="container">
        <div>
            <h2>Все ссылки</h2>
            <div id="results"></div>
        </div>
        <div>
            <h2>Рабочие ссылки</h2>
            <div id="workingLinks"></div>
        </div>
    </div>

    <script>
        const firstLinks = [
            "https://kra26.at/storage/image/1w/eb/s8wmmp62lisuoinp.webp/25edd29c-49c2-49ff-a406-cd8754b3e01d/",
            "https://kra26.at/storage/image/3t/ll/8yqkxw33znid6k3x.webp/4e894cb2-44c7-4889-a92b-0b56cdcb3e29/",
            "https://kra26.at/storage/image/lo/qk/rzc5f8ddnpkgruf4.webp/4c4e2ce8-246a-4c1b-b1c7-7a6999326b36/"
        ];

        let isRunning = false;

        // Функция для проверки ссылки с использованием Fetch API
        const checkWithFetch = async (url) => {
            try {
                const res = await fetch(url, { method: "HEAD" });
                return { url, status: res.ok ? "working" : "not-working" };
            } catch {
                return { url, status: "not-working" };
            }
        };

        // Функция для проверки с использованием XMLHttpRequest
        const checkWithXHR = (url) => {
            return new Promise((resolve) => {
                const xhr = new XMLHttpRequest();
                xhr.open('HEAD', url, true);
                xhr.onload = () => {
                    resolve({ url, status: xhr.status === 200 ? "working" : "not-working" });
                };
                xhr.onerror = () => {
                    resolve({ url, status: "not-working" });
                };
                xhr.send();
            });
        };

        // Функция для проверки с использованием img (картинка)
        const checkWithImage = (url) => {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    resolve({ url, status: "working" });
                };
                img.onerror = () => {
                    resolve({ url, status: "not-working" });
                };
                img.src = url;
            });
        };

        // Функция для отображения результата
        const display = (res, div) => {
            const el = document.createElement("div");
            el.textContent = res.url;
            el.className = res.status;
            div.appendChild(el);
            div.scrollTop = div.scrollHeight; // прокрутка вниз
        };

        // Функция для запуска проверки первых трех ссылок
        const startGen = async () => {
            const resultsDiv = document.getElementById("results"), workingDiv = document.getElementById("workingLinks");
            isRunning = true; document.getElementById("start").disabled = true; document.getElementById("stop").disabled = false;

            // Пример проверки с использованием всех методов
            for (let link of firstLinks) {
                // Пробуем проверку с Fetch API
                const res = await checkWithFetch(link); // Используйте `checkWithXHR(link)` или `checkWithImage(link)` для других методов
                display(res, resultsDiv);
                if (res.status === "working") display(res, workingDiv);
            }
        };

        // Остановка проверки
        const stopGen = () => { isRunning = false; document.getElementById("start").disabled = false; document.getElementById("stop").disabled = true; };
        document.getElementById("start").addEventListener("click", startGen);
        document.getElementById("stop").addEventListener("click", stopGen);
    </script>
</body>
</html>