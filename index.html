<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игра с кругами</title>
    <style>
        body {
            background: #0a0a0a;
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        canvas {
            background: black;
            display: block;
            border-radius: 50%;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 18px;
            background: darkviolet;
            color: white;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover {
            background: purple;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <button onclick="init()">Заново</button>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        let width, height, centerX, centerY;
        
        const ball = {
            x: 0, y: 0, radius: 10, speed: 2,
            angle: Math.random() * Math.PI * 2,
            dx: 0, dy: 0
        };
        
        let circles = [];

        function resizeCanvas() {
            width = canvas.width = window.innerWidth * 0.8;
            height = canvas.height = window.innerHeight * 0.8;
            centerX = width / 2;
            centerY = height / 2;
            ball.x = centerX;
            ball.y = centerY;
            ball.dx = Math.cos(ball.angle) * ball.speed;
            ball.dy = Math.sin(ball.angle) * ball.speed;
        }

        function createCircles() {
            circles = [];
            const count = Math.floor(Math.random() * 11) + 5;
            for (let i = 0; i < count; i++) {
                let radius = 50 + i * 30;
                let holes = Math.floor(Math.random() * 3) + 1;
                let holeAngles = [];
                for (let j = 0; j < holes; j++) {
                    holeAngles.push(Math.random() * Math.PI * 2);
                }
                circles.push({ radius, holes: holeAngles, speed: (Math.random() - 0.5) * 0.02 });
            }
        }

        function update() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            if (ball.x - ball.radius < 0 || ball.x + ball.radius > width) ball.dx *= -1;
            if (ball.y - ball.radius < 0 || ball.y + ball.radius > height) ball.dy *= -1;

            for (let i = circles.length - 1; i >= 0; i--) {
                let circle = circles[i];
                for (let holeAngle of circle.holes) {
                    let holeX = centerX + Math.cos(holeAngle) * circle.radius;
                    let holeY = centerY + Math.sin(holeAngle) * circle.radius;
                    let dist = Math.hypot(ball.x - holeX, ball.y - holeY);

                    if (dist < ball.radius) {
                        circles.splice(i, 1);
                        break;
                    }
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);

            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fill();

            ctx.strokeStyle = "darkviolet";
            ctx.lineWidth = 4;
            for (let circle of circles) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, circle.radius, 0, Math.PI * 2);
                ctx.stroke();

                ctx.fillStyle = "black";
                for (let holeAngle of circle.holes) {
                    let holeX = centerX + Math.cos(holeAngle) * circle.radius;
                    let holeY = centerY + Math.sin(holeAngle) * circle.radius;
                    ctx.beginPath();
                    ctx.arc(holeX, holeY, 10, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function init() {
            resizeCanvas();
            createCircles();
        }

        window.addEventListener("resize", resizeCanvas);
        init();
        gameLoop();
    </script>
</body>
</html>